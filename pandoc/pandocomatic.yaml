settings:
  recursive: true
  follow-symlinks: false
  skip: ['.*', 'pandocomatic.yaml']
templates:
#######################################
  refs:
    pandoc:
      standalone: true
      filter: pandoc-citeproc #process citations
      bibliography: Core.json
      csl: csl/apa-ian.csl
      #citation-abbreviations: cite-abbr.json
    metadata:
      notes-after-punctuation: false
      link-citations: true 
######################################
  docx:
    setup: []
    preprocessors: []
    pandoc:
      from: markdown
      to: docx
      standalone: true
      filter: 
        - 'filters/removeHR' #remove horizontal rules
        - 'filters/authorRemoveHash' #remove name: affiliation:
      reference-doc: 'templates/custom.docx'
      dpi: 300
    postprocessors: []
    cleanup: []
#######################################
  docx-convert-endnote:
    extends: ['refs','docx']
    preprocessors: ['preprocessors/convertEndnoteRefs']
#######################################
  docx-with-refs:
    extends: ['refs','docx']
#######################################
  docx-with-refs-no-links:
    extends: ['refs','docx']
    metadata: 
      link-citations: false
#######################################
  odt-with-refs:
    extends: 'docx-with-refs'
    pandoc:
      to: odt
      reference-doc: 'templates/custom.odt'
#######################################
  latex:
    setup: []
    preprocessors: ['preprocessors/removeAffiliations'] #LaTeX generates this from metadata unlike Word, so remove it from document for LaTeX compile
    pandoc:
      from: markdown
      to: latex
      standalone: true
      filter: 
        - filters/removeHR #remove horizontal rules
        - filters/authorToName #convert author to author: name: affiliation:
      template: templates/custom.latex
      dpi: 300
      base-header-level: 2
    metadata:
      classoption: twoside
      mainfont: 'Greta Text Pro'
      mainfontoptions: 'Numbers=OldStyle,Numbers=Proportional'
      sansfont: 'Graublau Sans'
      sansfontoptions: 'Numbers=OldStyle,Numbers=Proportional'
      monofont: 'Fira Code'
      mathfont: 'Cambria Math'
      mathfontoptions: 'math-style=ISO,bold-style=ISO'
      CJKmainfont: 'PingFang SC'
      CJKsansfont: 'Heiti SC'
      linkcolor: Mahogany
      citecolor: Sepia
      urlcolor: BrickRed
      lang: 'en-GB'
      documentclass: 'article'
      fontsize: '11pt'
      linestretch: '1.5'
      geometry: 'margin=2cm'
      nonumberfigures: true
      lof: false
    postprocessors: ['postprocessors/fixLaTeX']
    cleanup: []
#######################################
  latex-with-refs:
    extends: ['latex','refs']
    pandoc:
      from: markdown
      to: latex
#######################################
  latex-with-toc:
    extends: ['latex','refs']
    pandoc:
      table-of-contents: true
      #toc-depth: 4
#######################################
  pdf-with-refs:
    extends: 'latex-with-refs'
    pandoc:
      to: pdf
      pdf-engine: 'xelatex'
      standalone: true
    cleanup: ['latexmk -c']
#######################################
  eisvogel:
    extends: 'latex-with-refs'
    pandoc:
      template: templates/eisvogel.latex
      table-of-contents: true
      base-header-level: 2
    metadata: 
      titlepage: true
      titlepage-color: BB5544
      titlepage-text-color: FFFFFF
      titlepage-rule-color: FFFFFF
      titlepage-rule-height: 4
#######################################
  latex-ieee:
    extends: 'latex-with-refs'
    pandoc:
      template: templates/ieee.latex
    metadata: 
      fontsize: '10pt'
#######################################
  latex-scholar:
    extends: 'latex-with-refs'
    pandoc:
      template: templates/pandoc-scholar.latex
    metadata: 
      fontsize: '10pt'
#######################################
  memoir-with-refs:
    extends: 'latex-with-refs'
    pandoc:
      template: templates/custom-memoir.latex
      table-of-contents: true
      #toc-depth: 4
      base-header-level: 1
    metadata:
      documentclass: 'memoir'
######################################
  html:
    pandoc:
      from: markdown
      to: html5
      standalone: true
      number-sections: true
      section-divs: true
      filter: 'filters/removeHR' #remove horizontal rules
      template: 'templates/custom.html'
      css: 'templates/custom.css'
      dpi: 300
      table-of-contents: false
      toc-depth: 4
      base-header-level: 1
######################################
  html-pdf:
    extends: ['html']
    pandoc:
      to: pdf
      pdf-engine: prince
      pdf-engine-opts: 
        - '--page-size=A4'
        - '--page-margin=20mm'
#######################################
  html-self-contained:
    extends: ['html']
    pandoc:
      self-contained: true
#######################################
  html-with-refs:
    extends: ['refs','html']
#######################################
  tufte:
    pandoc:
      from: markdown
      to: html5
      section-divs: true
      standalone: true
      filter: pandoc-sidenote
      template: 'templates/tufte.html5'
      css: 
        - 'templates/tufte.css'
        - 'templates/tuftepandoc.css'
      self-contained: true
#######################################
  tufte-with-refs:
    extends: ['refs','tufte']
#######################################VARIOUS TEST TEMPLATES
  test:
    pandoc:
      from: markdown
      to: html5
      standalone: true
      css: 'templates/custom.css'
      self-contained: true
      mathjax: true
  test-markdown:
    pandoc:
      from: markdown
      to: markdown
      output: out.md
      standalone: true
      filter: 'filters/testFilter'
    metadata:
        author: Joanna Doe
  test-pdf:
    pandoc:
      from: markdown
      to: pdf
      latex-engine: 'xelatex'
      standalone: true
    metadata: 
      lang: 'en-GB'
      papersize: 'A4' 
      documentclass: 'article'
      fontsize: '12pt'
      linestretch: '1.75'
  test-latex:
    pandoc:
      from: markdown
      to: latex
      standalone: true
    metadata: 
      lang: 'en-GB'
      papersize: 'A4' 
      documentclass: 'article'
      fontsize: '12pt'
      linestretch: '1.75'

